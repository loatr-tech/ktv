{"version":3,"sources":["app/utils/firebase.ts","app/_context/room.context.tsx","app/home/home.tsx","app/room/room-banner.tsx","app/room/room.tsx","app/remote/remote.tsx","app/remote/remote-song.tsx","app/remote/remote-search.tsx","app/remote/remote-playing.tsx","app/App.tsx","reportWebVitals.ts","index.tsx"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","RoomContext","createContext","RoomContextProvider","props","useState","roomId","setRoomId","songs","setSongs","useEffect","unsubscribeFirebase","firestore","collection","doc","orderBy","onSnapshot","snapshot","newActiveSongs","docs","map","video","id","data","createRoom","a","add","play","then","room","Provider","value","onRoomChange","callback","playPauseSong","update","updateSongProps","songId","songProps","addSong","getRoomCollectionRefernce","removeFirstSong","length","delete","children","Home","useContext","isRoomCreated","setIsRoomCreated","controlLinkInputRef","useRef","onCreateRoom","className","to","onClick","current","select","setSelectionRange","document","execCommand","alert","onShareController","type","window","location","origin","onChange","ref","src","alt","RoomBanner","listenToPlayDebounce","title","runs","text","Room","ytPlayer","setYtPlayer","currentSong","setCurrentSong","songState","setSongState","remotePlay","setRemotePlay","match","params","includes","roomObject","clearTimeout","setTimeout","console","log","playVideo","pauseVideo","loadVideoById","videoId","tag","createElement","firstScriptTag","getElementsByTagName","parentNode","insertBefore","e","Player","playerVars","autoplay","controls","events","onReady","target","onStateChange","firstNewSong","position","tabIndex","Remote","btnDebounce","setBtnDebounce","onPlayPauseSong","skipSong","disabled","_addSongInFirebase","onTop","Promise","resolve","RemoteSong","isAdded","setIsAdded","thumbnails","thumbnail","videoTitle","url","RemoteSearch","query","setQuery","searchResults","setSearchResults","isSearching","setIsSearching","onSearch","useCallback","preventDefault","axios","get","onSubmit","placeholder","event","role","RemotePlaying","scope","song","index","statusText","onMoveToTheTop","App","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d1a7de87.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/firestore';\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAZ3DKq0vI256yimaad4iUp0uML33m07Yo\",\n  authDomain: \"loatr-tech-ktv.firebaseapp.com\",\n  projectId: \"loatr-tech-ktv\",\n  storageBucket: \"loatr-tech-ktv.appspot.com\",\n  messagingSenderId: \"580571065570\",\n  appId: \"1:580571065570:web:a0f122923e4800aa2742bb\",\n  measurementId: \"G-XQY5SYQYEV\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nexport default firebase;","import React, { createContext, useEffect, useState } from 'react';\nimport firebase from '../utils/firebase';\n\nexport const RoomContext = createContext<any>({});\n\nfunction getRoomCollectionRefernce(roomId: string) {\n  return firebase\n    .firestore()\n    .collection('rooms')\n    .doc(roomId)\n}\n\nexport default function RoomContextProvider(props: any) {\n  const [roomId, setRoomId] = useState('0EqUdVjYeqA8aAvAv3W5');\n  const [songs, setSongs] = useState<any[]>([]);\n\n  useEffect(() => {\n    const unsubscribeFirebase = firebase\n      .firestore()\n      .collection('rooms')\n      .doc(roomId)\n      .collection('songs')\n      .orderBy('position', 'asc')\n      .onSnapshot((snapshot) => {\n        const newActiveSongs = snapshot.docs.map((video: any) => {\n          return {\n            id: video.id,\n            ...video.data(),\n          };\n        });\n\n        setSongs(newActiveSongs);\n      });\n\n    return () => unsubscribeFirebase();\n  }, [roomId]);\n\n  const createRoom = async () => {\n    return firebase\n      .firestore()\n      .collection('rooms')\n      .add({ play: true })\n      .then(room => {\n        setRoomId(room.id);\n      });\n  }\n\n  const playPauseSong = (play: boolean) => {\n    return firebase\n      .firestore()\n      .collection('rooms')\n      .doc(roomId)\n      .update({ play })\n  }\n\n  const onRoomChange = (callback = () => {}) => {\n    return firebase\n      .firestore()\n      .collection('rooms')\n      .doc(roomId)\n      .onSnapshot(callback);\n  }\n\n  const updateSongProps = (songId: string, songProps: any) => {\n    return firebase\n      .firestore()\n      .collection('rooms')\n      .doc(roomId)\n      .collection('songs')\n      .doc(songId)\n      .update(songProps);\n  }\n\n  const addSong = (video: any) => {\n    return getRoomCollectionRefernce(roomId)\n      .collection('songs')\n      .add(video);\n  }\n\n  const removeFirstSong = () => {\n    if (songs.length) {\n      return firebase\n        .firestore()\n        .collection('rooms')\n        .doc(roomId)\n        .collection('songs')\n        .doc(songs[0].id)\n        .delete();\n    }\n  };\n\n  return (\n    <RoomContext.Provider\n      value={{\n        roomId,\n        setRoomId,\n        createRoom,\n        onRoomChange,\n        songs,\n        playPauseSong,\n        updateSongProps,\n        addSong,\n        removeFirstSong,\n      }}\n    >\n      {props.children}\n    </RoomContext.Provider>\n  );\n}\n","import React, { useContext, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { RoomContext } from '../_context/room.context';\nimport './home.scss';\n\nfunction Home() {\n  const { roomId, createRoom } = useContext(RoomContext);\n  const [isRoomCreated, setIsRoomCreated] = useState(false);\n  const controlLinkInputRef = useRef(null);\n\n  const onCreateRoom = async () => {\n    await createRoom();\n    setIsRoomCreated(true);\n  }\n\n  const onShareController = () => {\n    const { current }: any = controlLinkInputRef;\n    current.select();\n    current.setSelectionRange(0, 99999);\n    /* Copy the text inside the text field */\n    document.execCommand('copy');\n    /* Alert the copied text */\n    alert('Controller link has been copied on your clipboard');\n  }\n\n  return (\n    <div className=\"home-container\">\n      {isRoomCreated ? (\n        <>\n          <h4>Room created!</h4>\n          <i className=\"bi bi-check-circle text-success home-created-icon\"></i>\n          <Link to={`/room/${roomId}`} className=\"btn btn-info mb-2\">\n            Go to <i className=\"bi bi-mic\"></i> room\n          </Link>\n          <Link to={`/remote/${roomId}`} className=\"btn btn-warning mb-2\">\n            Go to <i className=\"bi bi-phone\"></i> remote controller\n          </Link>\n          <button\n            className=\"btn btn-outline-secondary mb-2\"\n            onClick={() => onShareController()}\n          >\n            <i className=\"bi bi-share\"></i> Share the controller\n          </button>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            value={`${window.location.origin}/#/remote/${roomId}`}\n            onChange={() => {}}\n            ref={controlLinkInputRef}\n          />\n        </>\n      ) : (\n        <>\n          <h4>Youtube Karaoke</h4>\n          <img src=\"karaoke-icon.png\" alt=\"karaoke icon\" />\n          <button\n            className=\"btn btn-primary mb-2\"\n            onClick={() => onCreateRoom()}\n          >\n            Create a room\n          </button>\n          <button className=\"btn btn-primary\">Join a room</button>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default Home;\n","import React, { useContext } from 'react';\nimport { RoomContext } from '../_context/room.context';\nimport './room-banner.scss';\n\nfunction RoomBanner() {\n  const { songs } = useContext(RoomContext);\n\n  return (\n    <div className=\"room-banner-container\">\n      <div className=\"room-banner\">\n        {songs.length ? (\n          <>\n            <span>\n              <b>正在播放:</b> {songs[0].title.runs[0].text}\n            </span>\n            <span>\n              <b>下一首:</b> {songs.length > 1 ? songs[1].title.runs[0].text : '没有了，快点歌'}\n            </span>\n          </>\n        ) : (\n          <span>没有歌曲啦，快点点歌</span>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default RoomBanner;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { RoomContext } from '../_context/room.context';\nimport RoomBanner from './room-banner';\nimport './room.scss';\ndeclare var window: any;\n\nlet listenToPlayDebounce: any;\n\nfunction Room(props: any) {\n  const {\n    setRoomId,\n    songs,\n    updateSongProps,\n    removeFirstSong,\n    onRoomChange,\n  } = useContext(RoomContext);\n  const [ytPlayer, setYtPlayer] = useState<any>();\n  const [currentSong, setCurrentSong] = useState<any>();\n  const [songState, setSongState] = useState<number>(-1);\n  const [remotePlay, setRemotePlay] = useState<boolean>();\n\n  useEffect(() => {\n    setRoomId(props.match.params.roomId);\n  }, [props.match.params.roomId, setRoomId]);\n\n  useEffect(() => {\n    if (ytPlayer && [-1, 1, 2].includes(songState)) {\n      onRoomChange((roomObject: any) => {\n        const { play } = roomObject.data();\n        clearTimeout(listenToPlayDebounce);\n        listenToPlayDebounce = setTimeout(() => {\n          if (remotePlay !== play) {\n            setRemotePlay(play);\n            console.log('play', play, 'songState', songState);\n            if ([-1, 2].includes(songState) && play) {\n              setTimeout(() => {\n                console.log('Listen and PLAY!');\n                ytPlayer.playVideo();\n              }, 100);\n            } else if (songState === 1 && !play) {\n              console.log('Listen and PAUSE!');\n              ytPlayer.pauseVideo();\n            }\n          }\n        }, 500);\n      });\n    }\n  }, [onRoomChange, songState, ytPlayer, remotePlay]);\n\n  useEffect(() => {\n    // Go to next song if current song/video ended\n    if (songState === 0 && ytPlayer) {\n      if (songs.length > 1) {\n        ytPlayer.loadVideoById(songs[1].videoId);\n      } else {\n        ytPlayer.loadVideoById('BHACKCNDMW8');\n      }\n      if (songs.length) {\n        removeFirstSong();\n      }\n      setSongState(1);\n    }\n  }, [songState, songs, ytPlayer, removeFirstSong]);\n\n  useEffect(() => {\n    // Load Youtube iframe API\n    const tag = document.createElement('script');\n    tag.id = 'youtube-iframe-api';\n    tag.src = 'https://www.youtube.com/iframe_api';\n    const firstScriptTag = document.getElementsByTagName('script')[0];\n    // @ts-ignore: Object is possibly 'null'.\n    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n    window['onYouTubeIframeAPIReady'] = (e: any) => {\n      new window['YT'].Player('ktv-youtube-iframe', {\n        videoId: 'BHACKCNDMW8',\n        playerVars: { autoplay: 1, controls: 0 },\n        events: {\n          onReady: (e: any) => {\n            setYtPlayer(e.target);\n          },\n          onStateChange: ({ data }: any) => {\n            setSongState(data);\n          },\n        },\n      });\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!!ytPlayer && songs.length) {\n      const firstNewSong = songs[0];\n      if (currentSong?.videoId !== firstNewSong.videoId) {\n        ytPlayer.loadVideoById(firstNewSong.videoId);\n        if (songs.length > 1) {\n          updateSongProps(firstNewSong.id, {\n            position: firstNewSong.position - 1000,\n          });\n        }\n        setCurrentSong(firstNewSong);\n      }\n    }\n  }, [ytPlayer, songs, currentSong, updateSongProps]);\n\n  return (\n    <div className=\"room-container\">\n      <RoomBanner />\n      <section className=\"room-iframe-wrapper\">\n        <div className=\"room-iframe-container\">\n          <div\n            id=\"ktv-youtube-iframe\"\n            className=\"room-iframe\"\n            tabIndex={-1}\n          ></div>\n        </div>\n      </section>\n\n      {ytPlayer ? (\n        <section className=\"room-actions\">\n          <button\n            className=\"btn btn-sm btn-secondary\"\n            onClick={() => setSongState(0)}\n          >\n            <i className=\"bi bi-skip-forward\"></i>\n          </button>\n          <button\n            className=\"btn btn-sm btn-secondary\"\n            onClick={() => ytPlayer.playVideo()}\n          >\n            <i className=\"bi bi-play\"></i>\n          </button>\n          <button\n            className=\"btn btn-sm btn-secondary\"\n            onClick={() => ytPlayer.pauseVideo()}\n          >\n            <i className=\"bi bi-pause\"></i>\n          </button>\n        </section>\n      ) : (\n        <></>\n      )}\n    </div>\n  );\n}\n\nexport default Room;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { RoomContext } from '../_context/room.context';\nimport './remote.scss';\n\nfunction Remote({ match }: any) {\n  const { songs, playPauseSong, removeFirstSong, roomId, setRoomId } = useContext(\n    RoomContext\n  );\n  const [btnDebounce, setBtnDebounce] = useState<boolean>(false);\n\n  useEffect(() => {\n    setRoomId(match.params.roomId);\n  }, [match.params.roomId, setRoomId]);\n\n  const onPlayPauseSong = async (play: boolean) => {\n    setBtnDebounce(true);\n    await playPauseSong(play);\n    setTimeout(() => setBtnDebounce(false), 300);\n  }\n\n  const skipSong = async () => {\n    setBtnDebounce(true);\n    await removeFirstSong();\n    setTimeout(() => setBtnDebounce(false), 300);\n  }\n\n  return (\n    <div className=\"remote-container\">\n      <section className=\"remote-links\">\n        <Link\n          to={`/remote/${roomId}/playing`}\n          className=\"btn btn-lg btn-primary\"\n        >\n          正在播放 <span className=\"badge\">{songs.length}</span>\n        </Link>\n        <Link\n          to={`/remote/${roomId}/search`}\n          className=\"btn btn-lg btn-warning\"\n        >\n          <i className=\"bi bi-music-note\"></i> 点歌\n        </Link>\n      </section>\n\n      <section className=\"remote-actions\">\n        <button\n          className={`btn btn-lg btn-${\n            songs.length < 2 ? 'outline-' : ''\n          }secondary`}\n          disabled={songs.length < 2 || btnDebounce}\n          onClick={() => skipSong()}\n        >\n          <i className=\"bi bi-skip-forward\"></i> 切歌\n        </button>\n        <button\n          className=\"btn btn-lg btn-secondary\"\n          onClick={() => onPlayPauseSong(true)}\n          disabled={btnDebounce}\n        >\n          <i className=\"bi bi-play\"></i>\n        </button>\n        <button\n          className=\"btn btn-lg btn-secondary\"\n          onClick={() => onPlayPauseSong(false)}\n          disabled={btnDebounce}\n        >\n          <i className=\"bi bi-pause\"></i>\n        </button>\n      </section>\n    </div>\n  );\n}\n\nexport default Remote;\n","import React, { useContext, useState } from 'react';\nimport { RoomContext } from '../_context/room.context';\nimport './remote-song.scss';\n\nfunction _addSongInFirebase(addSong: Function, songs: any[], video: any, onTop = false) {\n  return new Promise((resolve) => {\n    let position = 1000;\n    if (songs.length > 0) {\n      if (onTop && songs.length > 1) {\n        position = songs[1].position - 1;\n      } else {\n        position = songs[songs.length - 1].position + 1000;\n      }\n    }\n    addSong({ ...video, position }).then(() => {\n      resolve(true);\n    });\n  });\n}\n\nfunction RemoteSong(props: any) {\n  const { songs, addSong } = useContext(RoomContext);\n  const [isAdded, setIsAdded] = useState(false);\n  const { video } = props;\n  const { thumbnails } = video.thumbnail;\n  const [{ text: videoTitle }] = video.title.runs;\n\n  function onAddSong() {\n    _addSongInFirebase(addSong, songs, video).then(() => {\n      setIsAdded(true);\n    });\n  }\n\n  function onAddSongOnTop() {\n    _addSongInFirebase(addSong, songs, video, true).then(() => {\n      setIsAdded(true);\n    });\n  }\n\n  return (\n    <div className=\"remote-song\">\n      <section className=\"remote-song-header\">{videoTitle}</section>\n      <section className=\"remote-song-body\">\n        <div className=\"remote-song-image\">\n          <img src={thumbnails[thumbnails.length - 1].url} alt={videoTitle} />\n        </div>\n        <div className=\"remote-song-actions\">\n          {isAdded ? (\n            <div className=\"remote-song-already-added text-success\">\n              <i className=\"bi bi-check2-circle\"></i>\n            </div>\n          ) : (\n            <>\n              <button className=\"btn btn-secondary\" onClick={() => onAddSong()}>\n                添加\n              </button>\n              <button\n                className=\"btn btn-secondary\"\n                onClick={() => onAddSongOnTop()}\n              >\n                置顶\n              </button>\n            </>\n          )}\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default RemoteSong;\n","import React, { useCallback, useContext, useState } from 'react';\nimport { Link } from \"react-router-dom\";\nimport './remote-search.scss';\nimport axios from 'axios';\nimport RemoteSong from './remote-song';\nimport { RoomContext } from '../_context/room.context';\n\nfunction RemoteSearch() {\n  const { songs, roomId } = useContext(RoomContext);\n  const [query, setQuery] = useState<string>('');\n  const [searchResults, setSearchResults] = useState<any[]>([]);\n  const [isSearching, setIsSearching] = useState<boolean>(false);\n\n  const onSearch = useCallback(\n    async (e: any) => {\n      e.preventDefault();\n      if (query) {\n        setIsSearching(true);\n        const { data } = await axios.get(\n          `https://loatr-tech-api.herokuapp.com/ktv/search`,\n          {\n            params: { query },\n          }\n        );\n        setIsSearching(false);\n        setSearchResults(data);\n      }\n    },\n    [query]\n  );\n\n  return (\n    <>\n      <header className=\"remote-search-header\">\n        <Link to={`/remote/${roomId}`} className=\"btn btn-light\">\n          返回\n        </Link>\n        <Link to={`/remote/${roomId}/playing`} className=\"btn btn-primary\">\n          正在播放 <span className=\"badge\">{songs.length}</span>\n        </Link>\n      </header>\n      <form className=\"container\" onSubmit={onSearch}>\n        <div className=\"input-group remote-search-box\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Search song\"\n            value={query}\n            onChange={(event: any) => setQuery(event.target.value)}\n          />\n          <button\n            className=\"btn btn-outline-secondary\"\n            id=\"remote-search-input\"\n            type=\"button\"\n            onClick={onSearch}\n            disabled={isSearching}\n          >\n            Search\n          </button>\n        </div>\n      </form>\n\n      <section className=\"container\">\n        {isSearching ? (\n          <div className=\"text-center my-3\">\n            <div className=\"spinner-border text-info\" role=\"status\"></div>\n          </div>\n        ) : (\n          searchResults.map((video) => (\n            <RemoteSong video={video} key={video.videoId} />\n          ))\n        )}\n      </section>\n    </>\n  );\n}\n\nexport default RemoteSearch;\n","import React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { RoomContext } from '../_context/room.context';\nimport './remote-playing.scss';\n\nfunction RemotePlaying() {\n  const { songs, updateSongProps, roomId } = useContext(RoomContext);\n\n  const onMoveToTheTop = (song: any) => {\n    updateSongProps(song.id, { position: songs[1].position - 1 });\n  }\n\n  return (\n    <>\n      <header className=\"remote-playing-header\">\n        <Link to={`/remote/${roomId}`} className=\"btn btn-light\">\n          返回\n        </Link>\n        <span>播放列表</span>\n      </header>\n      <table className=\"table remote-playing-table\">\n        <thead>\n          <tr>\n            <th scope=\"col\">#</th>\n            <th scope=\"col\">已选歌曲</th>\n            <th scope=\"col\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {songs.map((song: any, index: number) => {\n            const [{ text: videoTitle }] = song.title.runs;\n            let statusText = null;\n            if (index === 0) {\n              statusText = '正在播放';\n            } else if (index === 1) {\n              statusText = '即将播放';\n            }\n            return (\n              <tr className={index === 0 ? 'table-primary' : ''} key={index}>\n                <td>{index + 1}</td>\n                <td>{videoTitle}</td>\n                <td>\n                  {statusText ? (\n                    <span>{statusText}</span>\n                  ) : (\n                    <button\n                      className=\"btn btn-outline-secondary\"\n                      onClick={() => onMoveToTheTop(song)}\n                    >\n                      置顶\n                    </button>\n                  )}\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </>\n  );\n}\n\nexport default RemotePlaying;\n","import React from 'react';\nimport { HashRouter, Switch, Route } from 'react-router-dom';\nimport './App.scss';\nimport Home from './home/home';\nimport Room from './room/room';\nimport Remote from './remote/remote';\nimport RemoteSearch from './remote/remote-search';\nimport RoomContextProvider from './_context/room.context';\nimport RemotePlaying from './remote/remote-playing';\n\nfunction App() {\n  return (\n    <RoomContextProvider>\n      <HashRouter>\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n          <Route path=\"/room/:roomId\" component={Room} />\n          <Route path=\"/remote/:roomId\" exact component={Remote} />\n          <Route path=\"/remote/:roomId/search\" component={RemoteSearch} />\n          <Route path=\"/remote/:roomId/playing\" component={RemotePlaying} />\n        </Switch>\n      </HashRouter>\n    </RoomContextProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport 'jquery/dist/jquery.min.js'\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js'\nimport App from './app/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}